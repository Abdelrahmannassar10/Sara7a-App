import { Router } from "express";
import * as MessageRouter from "./message.service.js";
import {uploadfile} from "../../utilies//multer/multer.cloud.js";
import { isValid } from "../../middleware/validation.middleware.js";
import { isAuthenticated } from "../../middleware/auth.middleware.js";
import { messageSchema } from "./message.validation.js";
const router = Router();
router.post("/:receiver", uploadfile().array("attachment", 3), isValid(messageSchema), MessageRouter.createMessage);
router.post("/:receiver/sender",  uploadfile().array("attachment", 3),isAuthenticated, isValid(messageSchema), MessageRouter.createMessage);
router.get("/:id", isAuthenticated, MessageRouter.getMessage);
export default router;